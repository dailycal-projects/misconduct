{% extends 'misconduct/base.html' %}
{% load static from staticfiles %}

{% block content %}
<div class="col-md-8 col-md-offset-2">
<h1>113</h1>
<p id="info">University of California employees violated sex misconduct policy in the past three years.</p>

<div id="list-wrapper">
<input class="search form-control" placeholder="Search by name" />
<br />
<form id="filter-form" class="form-inline">
	<div class="dropdown">
	<button class="campusbtn btn-primary dropdown-toggle" type="button" id="campus-dropdown"
	        data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
	  CAMPUS
	  <span class="caret"></span>
	</button>
	<ul class="dropdown-menu" aria-labelledby="campus-dropdown">
	  <li><a data-campus="all">All campuses</a></li>
	  <li><a data-campus="Berkeley">Berkeley</a></li>
	  <li><a data-campus="Davis">Davis</a></li>
	  <li><a data-campus="Irvine">Irvine</a></li>
	  <li><a data-campus="Los Angeles">Los Angeles</a></li>
	  <li><a data-campus="Merced">Merced</a></li>
	  <li><a data-campus="Riverside">Riverside</a></li>
	  <li><a data-campus="San Diego">San Diego</a></li>
	  <li><a data-campus="San Francisco">San Francisco</a></li>
	  <li><a data-campus="Santa Barbara">Santa Barbara</a></li>
	  <li><a data-campus="Santa Cruz">Santa Cruz</a></li>
	</ul>	
	</div>
</form>

<form id="filter-form2" class="form-inline">
	<div class="dropdown">
	<button class="datebtn btn-primary dropdown-toggle" type="button" id="year-dropdown"
	        data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
	  YEARS
	  <span class="caret"></span>
	</button>
	<ul class="dropdown-menu" aria-labelledby="year-dropdown" id="year">
	  <li><a id="year" data-year="all">All years</a></li>
	  <li><a id="year" data-year="2015">2015</a></li>
	  <li><a id="year" data-year="2014">2014</a></li>
	  <li><a id="year" data-year="2013">2013</a></li>
	  <li><a id="year" data-year="2012">2012</a></li>
	  <li><a id="year" data-year="2011">2011</a></li>
	</ul>	
	</div>
</form>

	
<br />

<div class="list">
{% for case in object_list %}
<div class="list-item">
	<h3 class="name"><a href="{% url 'case-detail' case.slug %}">{{ case.respondent }}</a></h3>
	<h4>{{ case.respondent_position }}</h4> 
	<p>{{ case.description }}</p>
	<p><b>Resolution: </b>{{ case.resolution }}</p>
	<p class="labels"><span class="complaint_date">{{ case.complaint_date|date:"N Y" }}</span> &middot; <span class="campus">{{ case.campus }}</span></p>
</div>
{% endfor %}
</div>
</div>

</div>
{% endblock %}

{% block extra-css %}
<style>
h1 {
	text-align: center;
	margin: auto;
	font-family: "Times New Roman", Times, serif;
	font-size: 350px;
	letter-spacing: -30px;
}

#info {
	
}

.campusbtn {
  background-color: #e7e7e7;
  border-radius: 5px;
  font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
  color: black;
  font-size: 15px;
  padding: 10px 20px 10px 20px;
  text-decoration: none;
  position: absolute;
}

.datebtn {
  background-color: #e7e7e7;
  border-radius: 5px;
  font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
  color: black;
  font-size: 15px;
  padding: 10px 20px 10px 20px;
  text-decoration: none;
  position: relative;
  left:18%;

}

h3 a {
	color: #000;
}
h3 a:hover {
	color: #000;
}
h4 {
	font-weight: 400;
}
.labels {
	font-size: 14px;
	font-weight: 400;
	text-transform: uppercase;
	letter-spacing: .5px;
}

</style>
{% endblock %}

{% block extra-js %}
<script src="//cdnjs.cloudflare.com/ajax/libs/list.js/1.2.0/list.min.js"></script>
<script type="text/javascript">
var options = {
  valueNames: [
	  'name',
	  'campus',
	  'complaint_date'
  ]
};
var caseList = new List('list-wrapper', options);

$('.dropdown-menu li a').click(function() {
	if (this.id == "year") {
		$('#year-dropdown').html($(this).html() + ' <span class="caret"></span>');
    	var year = $(this).data('year');
    	if (year == 'all') {
    		caseList.filter();
    	} else {
    		caseList.filter(function(item) {
    			var complaint_year = new Date(item.values().complaint_date).getFullYear();
				if (complaint_year == year) {
					return true;
				} else {
					return false;
				}
    		});
    	}
	} else {
		$('#campus-dropdown').html($(this).html() + ' <span class="caret"></span>');
		var campus = $(this).data('campus');
		if (campus == 'all') {
			caseList.filter();
		} else {
			caseList.filter(function(item) {
				if (item.values().campus == campus) {
					console.log(campus);
					return true;
				} else {
					return false;
				}
			});
		}
	}
});


</script>
{% endblock %}